#!/usr/bin/bash

colors="gruvbox-dark"
config_root="${XDG_CONFIG_HOME}/termite"

if [[ $1 == "--help" ]]; then
  echo "Usage: $0 [color]"
  echo ""
  echo "Generates termite config with the selected color (defaults to $colors) "
  echo "and reloads all Termite windows."
  exit 0
fi

if [[ $1 == "gruvbox-light" ]]; then
  colors="gruvbox-light"
elif [[ $1 == "gruvbox-dark" ]]; then
  colors="gruvbox-dark"
elif [[ -n $1 ]]; then
  echo "WARNING: Unknown color \"$1\", using \"$colors\" instead." >/dev/stderr
fi

cat "${config_root}/base" "${config_root}/${colors}" > "${config_root}/config" && \
  pkill --uid "$USER" -USR1 termite
