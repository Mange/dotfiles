#!/bin/env ruby

require "readline"

while input = Readline.readline("> ", true)
  break if input == "exit"
  Readline::HISTORY.pop if input.empty?

  if input.end_with?("??")
    input = input.chomp("??")
    system("awesome-client", "return gears.debug.dump_return(#{input})")
  elsif input.end_with?("?")
    input = input.chomp("?")
    system("awesome-client", "return #{input}")
  else
    system("awesome-client", input)
  end
end
