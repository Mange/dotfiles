#!/usr/bin/bash
# Don't call this directly; instead use the shell-function "theme"

set -e
new_style="$1"

# Sanity check that the theme is actually one that is supported
if [[ "$new_style" != dark && "$new_style" != light ]]; then
  echo "Unknown theme: \"$new_style\"" >&2
  exit 1
fi

echo "$new_style" >"${XDG_RUNTIME_DIR}/current_theme"

ln -sf "./${new_style}.jpg" "${XDG_DATA_HOME}/wallpapers/current.jpg"

hash toggl 2>/dev/null && toggl --set-background "${new_style}" >/dev/null
