#!/usr/bin/env bash
# Dynamic startup programs that I cannot represent well in i3 config.

~/.local/bin/fix-keyboard

function setup_touchpad() {
    touchpad="$1"

    # Natural scrolling
    xinput set-prop "${touchpad}" "libinput Natural Scrolling Enabled" 1

    # Tapping
    xinput set-prop "${touchpad}" "libinput Tapping Enabled" 1

    # Disable touchpad while typing
    xinput set-prop "${touchpad}" "libinput Disable While Typing Enabled" 1
}

case "$(hostname)" in
  bilquis)
    xrandr --dpi 96
    [[ "$(autorandr --detected)" == "bilquis-work" ]] && xrandr --output DP-0 --off
    xrandr --dpi 96
    setup_touchpad "SynPS/2 Synaptics TouchPad"
    # Start Slack
    wm-start slack
    ;;

  krista)
    setup_touchpad "SynPS/2 Synaptics TouchPad"
    ;;

  morbidus)
    # Start Discord
    wm-start discord-canary

    # Start steam
    wm-start gtk-launch steam
    ;;
  *)
    ;;
esac

autorandr --change --default horizontal
xrandr --dpi 96
