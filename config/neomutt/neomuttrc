# Still TODO:
#   - Sending emails
#   - Address book integration (abook?)
#   - Date format
#   - Custom highlighting of message bodies (emails, bold text, backticks, etc.)
#   - GPG encryption, signing, etc.
#   - Shortcuts to open/collapse threads
#   - Replicate more shortcuts from gmail web interface
#   - Integrate notmuch

set delete # Delete ("remove from tag") without confirmation
set fast_reply # Go straight to compose when replying
set fcc_attach # save attachments with the body
set forward_format = "Fwd: %s"
set forward_quote
set include # include message in reply
set mailcap_path = "$XDG_CONFIG_HOME/neomutt/mailcap"
set mark_old = no # Unread messages stay unread until read
set markers = no # Hide "+" at wrapped lines
set mime_forward = yes # attachments are forwarded
set rfc2047_parameters = yes # Decode attachment names from RFC2047
set sleep_time = 0
set sort = "threads"
set sort_aux = reverse-last-date-received
set sort_re
set use_from = yes # Generate "From:" header
set wait_key = no # Don't "Press key to continue"
set quit # Quit without confirmation
unset confirmappend # Move messages to another mailbox without confirmation
unset mark_old # "Unread" is enough, no need for "New/Old"
unset move # Gmail does this
unset resolve # Cursor should stay on the email when modifying it

set pager_index_lines = 8
set pager_context = 5
set pager_stop
set menu_scroll
set smart_wrap

set reverse_name # reply as reciever
set reverse_realname

auto_view text/html
auto_view application/pgp-encrypted

source /usr/share/doc/neomutt/vim-keys/vim-keys.rc
# https://www.sthu.org/code/codesnippets/mutt-gruvbox.html
source $XDG_CONFIG_HOME/neomutt/gruvbox.muttrc
source $XDG_CONFIG_HOME/neomutt/gruvbox-extended.muttrc

# Sidebar
set sidebar_visible = yes
set sidebar_width = 20
set sidebar_short_path = yes
set sidebar_next_new_wrap = yes
set sidebar_format = "%B%?F? [%F]?%* %?N?%N"
set sidebar_folder_indent
set sidebar_indent_string = "  "
set mail_check_stats
bind index,pager \Ck sidebar-prev
bind index,pager \Cj sidebar-next
bind index,pager \Co sidebar-open
bind index,pager \Cp sidebar-prev-new
bind index,pager \Cn sidebar-next-new

# Sync mailbox one in a while to match what is happening with notmuch / mailboxes, etc.
timeout-hook 'exec sync-mailbox'
startup-hook 'exec sync-mailbox'
shutdown-hook 'exec sync-mailbox'

bind index,pager i noop
macro index,pager i1 '<sync-mailbox><enter-command>source ~/.config/neomutt/accounts/mange.muttrc<enter><change-folder>!<enter>;<check-stats>' "Switch to mange"
macro index,pager i2 '<sync-mailbox><enter-command>source ~/.config/neomutt/accounts/gmail.muttrc<enter><change-folder>!<enter>;<check-stats>' "Switch to gmail"
macro index,pager i3 '<sync-mailbox><enter-command>source ~/.config/neomutt/accounts/devbox.muttrc<enter><change-folder>!<enter>;<check-stats>' "Switch to devbox"

# Default to private email
source ~/.config/neomutt/accounts/mange.muttrc

# Viewing email
macro index,pager \cb "<pipe-message> urlscan<Enter>" "call urlscan to extract URLs out of a message"
macro attach,compose \cb "<pipe-entry> urlscan<Enter>" "call urlscan to extract URLs out of a message"

