# vim: ft=sh

if [[ $_mange_xdg_zealotry != "yes" ]]; then
  _mange_xdg_zealotry="yes"

  # It's lovely when all my configs can rely on these variables actually being
  # set and not have to hardcode the fallback values everywhere.
  export XDG_CONFIG_HOME="${XDG_CONFIG_HOME:-${HOME}/.config}"
  export XDG_DATA_HOME="${XDG_DATA_HOME:-${HOME}/.local/share}"
  export XDG_CACHE_HOME="${XDG_CACHE_HOME:-${HOME}/.cache}"

  #
  # XDG base directory exports for special snowflakes
  #

  # ZSH
  export ZDOTDIR="${XDG_CONFIG_HOME}/zsh"
  # HISTFILE is set in zshrc

  # Ruby
  export GEMRC="${XDG_CONFIG_HOME}/ruby/gemrc"
  export IRBRC="${XDG_CONFIG_HOME}/ruby/irbrc"

  # npm (â€¦are assholes)
  # https://github.com/npm/npm/issues/6675
  export NPM_CONFIG_USERCONFIG="${XDG_CONFIG_HOME}/npm/config"
  export NPM_CONFIG_CACHE="${XDG_CACHE_HOME}/npm"
  export NPM_CONFIG_TMP="${XDG_RUNTIME_DIR}/npm"

  # Postgres
  export PSQLRC="${XDG_CONFIG_HOME}/postgresql/psqlrc"

  # tmux
  alias tmux='tmux -f "${XDG_CONFIG_HOME}/tmux/tmux.conf"'
  if [ -n "$XDG_RUNTIME_DIR" ]; then
    export TMUX_TMPDIR="$XDG_RUNTIME_DIR"
  fi

  # Taskwarrior
  export TASKRC="${XDG_CONFIG_HOME}/taskwarrior/config"

  # ctags
  export CTAGS="--options=${XDG_CONFIG_HOME}/ctags/option"

  # Xauthority
  # Temporarily disabled; I need to get lightdm to actually write the file
  # here. Not worth the fight currently...
  # export XAUTHORITY="${XDG_RUNTIME_DIR}/Xauthority"
fi
