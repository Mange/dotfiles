#!/usr/bin/env bash
set -e

# shellcheck source=../../data/gruvbox/colors.env
source "${XDG_DATA_HOME}/gruvbox/colors.env"

root="$(dirname "$0")"

task_cmd="task rc.echo.command=no rc._forcecolor=no rc.blanklines=false rc.hooks=off rc.verbose=nothing"
task_cmd="$task_cmd rc.report.scoped.columns=id rc.report.scoped.labels=id"

ready=$($task_cmd +READY scoped | wc -l)
overdue=$($task_cmd +OVERDUE scoped | wc -l)
today=$($task_cmd +TODAY scoped | wc -l)
week=$($task_cmd +WEEK scoped | wc -l)

"$root/module" green "üìì" "${ready} [${today}/${week}]"

if [[ $overdue -gt 0 ]]; then
  echo -n " "
	"$root/module" "red" "‚ùó" "${overdue}"
fi
