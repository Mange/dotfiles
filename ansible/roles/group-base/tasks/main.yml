# yaml-language-server: $schema=https://raw.githubusercontent.com/ansible-community/schemas/main/f/ansible-tasks.json
- block:
    - include_tasks: arch.yml
      when: ansible_os_family == "Archlinux"
      tags:
        - arch

    - name: Install base packages
      when: ansible_os_family == "Archlinux"
      kewlfft.aur.aur:
        name:
          - base-devel
          - curl
          - dnsutils # host(1), etc.
          - git
          - inetutils # hostname(1), etc.
          - jq
          - lsof
          - man-pages
          - openssh # SSH client and server
          - parallel
          - polkit
          - tmux

          # Shell
          - zsh
          - zsh-completions
          - zsh-history-substring-search
          - zsh-syntax-highlighting

          # Filesystems
          - nfs-utils
          - ntfs-3g
          - exfat-utils
          - btrfs-progs

    - include_tasks: grub_theme.yml

    - name: "Enable services"
      become: true
      when: not inside_docker
      systemd:
        name: "{{ item }}"
        enabled: true
        state: started
      loop:
        - sshd
        - bluetooth
